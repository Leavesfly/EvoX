# ä½¿ç”¨ç¤ºä¾‹

<cite>
**æœ¬æ–‡æ¡£å¼•ç”¨çš„æ–‡ä»¶**
- [SimpleChatBot.java](file://evox-examples/src/main/java/io/leavesfly/evox/examples/SimpleChatBot.java)
- [ComprehensiveChatBot.java](file://evox-examples/src/main/java/io/leavesfly/evox/examples/ComprehensiveChatBot.java)
- [MemoryAgentExample.java](file://evox-examples/src/main/java/io/leavesfly/evox/examples/MemoryAgentExample.java)
- [ToolsExample.java](file://evox-examples/src/main/java/io/leavesfly/evox/examples/ToolsExample.java)
- [SequentialWorkflowExample.java](file://evox-examples/src/main/java/io/leavesfly/evox/examples/SequentialWorkflowExample.java)
- [WorkflowDemo.java](file://evox-examples/src/main/java/io/leavesfly/evox/examples/WorkflowDemo.java)
- [BenchmarkExample.java](file://evox-examples/src/main/java/io/leavesfly/evox/examples/BenchmarkExample.java)
- [MultiModelExample.java](file://evox-examples/src/main/java/io/leavesfly/evox/examples/MultiModelExample.java)
- [run-examples.sh](file://evox-examples/run-examples.sh)
- [pom.xml](file://evox-examples/pom.xml)
- [README.md](file://evox-examples/README.md)
</cite>

## ç›®å½•
1. [ç®€ä»‹](#ç®€ä»‹)
2. [é¡¹ç›®ç»“æ„æ¦‚è§ˆ](#é¡¹ç›®ç»“æ„æ¦‚è§ˆ)
3. [åŸºç¡€èŠå¤©æœºå™¨äººç¤ºä¾‹](#åŸºç¡€èŠå¤©æœºå™¨äººç¤ºä¾‹)
4. [å¸¦è®°å¿†çš„å¯¹è¯ç¤ºä¾‹](#å¸¦è®°å¿†çš„å¯¹è¯ç¤ºä¾‹)
5. [å·¥å…·ä½¿ç”¨ç¤ºä¾‹](#å·¥å…·ä½¿ç”¨ç¤ºä¾‹)
6. [å·¥ä½œæµç¼–æ’ç¤ºä¾‹](#å·¥ä½œæµç¼–æ’ç¤ºä¾‹)
7. [ç»¼åˆèŠå¤©æœºå™¨äººç¤ºä¾‹](#ç»¼åˆèŠå¤©æœºå™¨äººç¤ºä¾‹)
8. [å¤šæ¨¡å‹é€‚é…ç¤ºä¾‹](#å¤šæ¨¡å‹é€‚é…ç¤ºä¾‹)
9. [æ€§èƒ½åŸºå‡†æµ‹è¯•ç¤ºä¾‹](#æ€§èƒ½åŸºå‡†æµ‹è¯•ç¤ºä¾‹)
10. [è¿è¡Œç¤ºä¾‹çš„æ–¹æ³•](#è¿è¡Œç¤ºä¾‹çš„æ–¹æ³•)
11. [æœ€ä½³å®è·µå’Œæ¶æ„è®¾è®¡](#æœ€ä½³å®è·µå’Œæ¶æ„è®¾è®¡)
12. [æ€»ç»“](#æ€»ç»“)

## ç®€ä»‹

EvoX æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ AI æ¡†æ¶ï¼Œæä¾›äº†å®Œæ•´çš„æ™ºèƒ½ä½“å¼€å‘å·¥å…·é“¾ã€‚æœ¬æŒ‡å—å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ EvoX æ„å»ºå„ç§ç±»å‹çš„ AI åº”ç”¨ç¨‹åºï¼Œä»ç®€å•çš„èŠå¤©æœºå™¨äººåˆ°å¤æ‚çš„å¤šæ™ºèƒ½ä½“åä½œç³»ç»Ÿã€‚

EvoX çš„æ ¸å¿ƒä¼˜åŠ¿ï¼š
- **æ¨¡å—åŒ–æ¶æ„**ï¼šæ¸…æ™°åˆ†ç¦»çš„ç»„ä»¶è®¾è®¡
- **çµæ´»çš„æ™ºèƒ½ä½“ç³»ç»Ÿ**ï¼šæ”¯æŒå¤šç§æ™ºèƒ½ä½“ç±»å‹
- **ä¸°å¯Œçš„å·¥å…·ç”Ÿæ€**ï¼šå†…ç½®å¤šç§å®ç”¨å·¥å…·
- **å¼ºå¤§çš„å·¥ä½œæµç¼–æ’**ï¼šæ”¯æŒå¤æ‚ä¸šåŠ¡æµç¨‹
- **å¤šæ¨¡å‹æ”¯æŒ**ï¼šå…¼å®¹å¤šç§ LLM æä¾›å•†

## é¡¹ç›®ç»“æ„æ¦‚è§ˆ

EvoX é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹æ ¸å¿ƒæ¨¡å—ï¼š

```mermaid
graph TB
subgraph "EvoX æ ¸å¿ƒæ¨¡å—"
Core[evox-core<br/>æ ¸å¿ƒåŸºç¡€è®¾æ–½]
Models[evox-models<br/>LLM é›†æˆ]
Agents[evox-agents<br/>æ™ºèƒ½ä½“ç³»ç»Ÿ]
Actions[evox-actions<br/>åŠ¨ä½œå¤„ç†]
Memory[evox-memory<br/>è®°å¿†ç®¡ç†]
Tools[evox-tools<br/>å·¥å…·é›†]
Workflow[evox-workflow<br/>å·¥ä½œæµç¼–æ’]
Storage[evox-storage<br/>å­˜å‚¨ç³»ç»Ÿ]
end
subgraph "ç¤ºä¾‹åº”ç”¨"
Examples[evox-examples<br/>ç¤ºä¾‹é›†åˆ]
end
subgraph "æ‰©å±•æ¨¡å—"
RAG[evox-rag<br/>æ£€ç´¢å¢å¼ºç”Ÿæˆ]
Optimizers[evox-optimizers<br/>ä¼˜åŒ–å™¨]
HITL[evox-hitl<br/>äººå·¥å¹²é¢„]
Benchmarks[evox-benchmark<br/>åŸºå‡†æµ‹è¯•]
end
Examples --> Core
Examples --> Models
Examples --> Agents
Examples --> Actions
Examples --> Memory
Examples --> Tools
Examples --> Workflow
Examples --> Storage
RAG --> Core
Optimizers --> Core
HITL --> Core
Benchmarks --> Core
```

**å›¾è¡¨æ¥æº**
- [pom.xml](file://evox-examples/pom.xml#L20-L88)

## åŸºç¡€èŠå¤©æœºå™¨äººç¤ºä¾‹

### ç¤ºä¾‹æ¦‚è¿°

SimpleChatBot å±•ç¤ºäº† EvoX æ¡†æ¶çš„åŸºç¡€ä½¿ç”¨æ–¹æ³•ï¼ŒåŒ…æ‹¬æ™ºèƒ½ä½“ã€è®°å¿†å’Œå·¥å…·çš„åŸºæœ¬é›†æˆã€‚

### æ¶æ„è®¾è®¡

```mermaid
sequenceDiagram
participant User as ç”¨æˆ·
participant Agent as ChatBotAgent
participant Memory as ShortTermMemory
participant LLM as OpenAI LLM
User->>Agent : ç”¨æˆ·è¾“å…¥æ¶ˆæ¯
Agent->>Memory : ä¿å­˜ç”¨æˆ·æ¶ˆæ¯
Agent->>Memory : è·å–å†å²æ¶ˆæ¯
Agent->>LLM : ç”Ÿæˆå›å¤
LLM-->>Agent : è¿”å›å“åº”
Agent->>Memory : ä¿å­˜AIå›å¤
Agent-->>User : è¿”å›æœ€ç»ˆå“åº”
```

**å›¾è¡¨æ¥æº**
- [SimpleChatBot.java](file://evox-examples/src/main/java/io/leavesfly/evox/examples/SimpleChatBot.java#L70-L92)

### æ ¸å¿ƒç»„ä»¶

#### 1. ChatBotAgent æ™ºèƒ½ä½“

æ™ºèƒ½ä½“æ˜¯ EvoX çš„æ ¸å¿ƒç»„ä»¶ï¼Œè´Ÿè´£åè°ƒå…¶ä»–ç»„ä»¶çš„å·¥ä½œï¼š

```java
// åˆ›å»ºæ™ºèƒ½ä½“å®ä¾‹
ChatBotAgent agent = new ChatBotAgent(llm);

// æ·»åŠ èŠå¤©åŠ¨ä½œ
addAction(new ChatAction(llm));

// æ‰§è¡Œå¯¹è¯
Message response = agent.execute("chat", history);
```

#### 2. ShortTermMemory çŸ­æœŸè®°å¿†

çŸ­æœŸè®°å¿†ç®¡ç†å¯¹è¯å†å²ï¼Œæ”¯æŒæ»‘åŠ¨çª—å£æœºåˆ¶ï¼š

```java
// åˆ›å»ºè®°å¿†å®ä¾‹
ShortTermMemory memory = new ShortTermMemory(10);

// æ·»åŠ æ¶ˆæ¯
memory.addMessage(userMessage);

// è·å–æœ€æ–°æ¶ˆæ¯
List<Message> history = memory.getLatestMessages(5);
```

#### 3. ChatAction åŠ¨ä½œå¤„ç†

åŠ¨ä½œå®šä¹‰äº†æ™ºèƒ½ä½“çš„å…·ä½“è¡Œä¸ºï¼š

```java
@Override
public ActionOutput execute(ActionInput input) {
    ChatActionInput chatInput = (ChatActionInput) input;
    List<Message> messages = chatInput.getMessages();
    
    // æ„å»ºæç¤ºè¯
    String prompt = buildPrompt(messages);
    
    // è°ƒç”¨ LLM ç”Ÿæˆå›å¤
    String response = llm.generate(prompt);
    
    return SimpleActionOutput.success(response);
}
```

### è¿è¡Œç¤ºä¾‹

```bash
# è¿è¡ŒåŸºç¡€èŠå¤©æœºå™¨äºº
mvn exec:java -pl evox-examples \
  -Dexec.mainClass="io.leavesfly.evox.examples.SimpleChatBot"
```

**ç« èŠ‚æ¥æº**
- [SimpleChatBot.java](file://evox-examples/src/main/java/io/leavesfly/evox/examples/SimpleChatBot.java#L35-L157)

## å¸¦è®°å¿†çš„å¯¹è¯ç¤ºä¾‹

### ç¤ºä¾‹æ¦‚è¿°

MemoryAgentExample å±•ç¤ºäº†å¦‚ä½•åˆ›å»ºå…·æœ‰é•¿æœŸè®°å¿†èƒ½åŠ›çš„æ™ºèƒ½ä½“ï¼Œæ”¯æŒæ·»åŠ ã€æ£€ç´¢ã€æ›´æ–°å’Œåˆ é™¤è®°å¿†ã€‚

### å¾…å®ç°çš„åŠŸèƒ½

å½“å‰ Memory æ¨¡å—å¤„äºå¼€å‘é˜¶æ®µï¼Œè®¡åˆ’æ”¯æŒä»¥ä¸‹åŠŸèƒ½ï¼š

| åŠŸèƒ½ç±»åˆ« | å®ç°çŠ¶æ€ | æè¿° |
|---------|---------|------|
| çŸ­æœŸè®°å¿† | âœ… å®Œæˆ | ä¸´æ—¶ä¿å­˜å¯¹è¯å†å² |
| é•¿æœŸè®°å¿† | ğŸš§ å¼€å‘ä¸­ | æŒä¹…åŒ–å­˜å‚¨é‡è¦ä¿¡æ¯ |
| å·¥ä½œè®°å¿† | ğŸš§ å¼€å‘ä¸­ | å½“å‰ä»»åŠ¡ç›¸å…³è®°å¿† |
| å‘é‡æ•°æ®åº“ | ğŸš§ å¼€å‘ä¸­ | FAISS, Chroma, Qdrant |
| å…³ç³»æ•°æ®åº“ | ğŸš§ å¼€å‘ä¸­ | PostgreSQL, SQLite |
| å†…å­˜å­˜å‚¨ | âœ… å®Œæˆ | InMemory å­˜å‚¨ |

### é¢„æœŸæ¶æ„

```mermaid
classDiagram
class LongTermMemory {
+add(message) void
+search(query, k) Message[]
+update(id, message) void
+delete(id) void
}
class MemoryConfig {
+StorageType storageType
+VectorStore vectorStore
+int maxMemories
}
class CustomizeAgent {
+LongTermMemory memory
+execute(inputs) Message
}
LongTermMemory --> MemoryConfig
CustomizeAgent --> LongTermMemory
```

**å›¾è¡¨æ¥æº**
- [MemoryAgentExample.java](file://evox-examples/src/main/java/io/leavesfly/evox/examples/MemoryAgentExample.java#L48-L94)

**ç« èŠ‚æ¥æº**
- [MemoryAgentExample.java](file://evox-examples/src/main/java/io/leavesfly/evox/examples/MemoryAgentExample.java#L16-L95)

## å·¥å…·ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹æ¦‚è¿°

ToolsExample å±•ç¤ºäº† EvoX å†…ç½®çš„å„ç§å·¥å…·çš„ä½¿ç”¨æ–¹æ³•ï¼ŒåŒ…æ‹¬è®¡ç®—å™¨ã€HTTP å®¢æˆ·ç«¯ã€æ–‡ä»¶ç³»ç»Ÿã€æœç´¢å¼•æ“å’Œæµè§ˆå™¨å·¥å…·ã€‚

### å·¥å…·åˆ†ç±»å’ŒåŠŸèƒ½

```mermaid
graph LR
subgraph "å·¥å…·ç±»å‹"
Calc[è®¡ç®—å™¨å·¥å…·<br/>CalculatorTool]
HTTP[HTTPå·¥å…·<br/>HttpClientTool]
File[æ–‡ä»¶å·¥å…·<br/>FileSystemTool]
Search[æœç´¢å·¥å…·<br/>SearchTool]
Browser[æµè§ˆå™¨å·¥å…·<br/>BrowserTool]
DB[æ•°æ®åº“å·¥å…·<br/>DatabaseTool]
Image[å›¾åƒå·¥å…·<br/>ImageGenerationTool]
end
subgraph "åº”ç”¨åœºæ™¯"
Math[æ•°å­¦è®¡ç®—]
API[APIè°ƒç”¨]
FS[æ–‡ä»¶æ“ä½œ]
Web[ç½‘é¡µæœç´¢]
Automation[è‡ªåŠ¨åŒ–]
Data[æ•°æ®åˆ†æ]
Vision[è§†è§‰å¤„ç†]
end
Calc --> Math
HTTP --> API
File --> FS
Search --> Web
Browser --> Automation
DB --> Data
Image --> Vision
```

**å›¾è¡¨æ¥æº**
- [ToolsExample.java](file://evox-examples/src/main/java/io/leavesfly/evox/examples/ToolsExample.java#L25-L39)

### æ ¸å¿ƒå·¥å…·ä½¿ç”¨ç¤ºä¾‹

#### 1. è®¡ç®—å™¨å·¥å…·

```java
CalculatorTool calculator = new CalculatorTool();

// åŸºç¡€è¿ç®—
var result1 = calculator.add(10, 5);        // 10 + 5 = 15
var result2 = calculator.multiply(7, 8);    // 7 * 8 = 56
var result3 = calculator.divide(100, 4);    // 100 / 4 = 25

// é«˜çº§æ•°å­¦å‡½æ•°
var result4 = calculator.power(2, 10);      // 2^10 = 1024
var result5 = calculator.sqrt(144);         // âˆš144 = 12
var result6 = calculator.sin(30);           // sin(30Â°) â‰ˆ 0.5

// è¡¨è¾¾å¼è®¡ç®—
Map<String, Object> params = new HashMap<>();
params.put("expression", "(10 + 5) * 2 - 8");
var result7 = calculator.execute(params);
```

#### 2. HTTP å®¢æˆ·ç«¯å·¥å…·

```java
HttpClientTool httpClient = new HttpClientTool();

// GET è¯·æ±‚
Map<String, Object> getParams = new HashMap<>();
getParams.put("method", "GET");
getParams.put("url", "https://api.github.com/repos/octocat/Hello-World");

// POST è¯·æ±‚
Map<String, Object> postParams = new HashMap<>();
postParams.put("method", "POST");
postParams.put("url", "https://httpbin.org/post");
postParams.put("body", "{\"key\":\"value\"}");

Map<String, String> headers = new HashMap<>();
headers.put("Content-Type", "application/json");
postParams.put("headers", headers);
```

#### 3. æ–‡ä»¶ç³»ç»Ÿå·¥å…·

```java
FileSystemTool fileTool = new FileSystemTool();

// æ£€æŸ¥æ–‡ä»¶å­˜åœ¨
Map<String, Object> params1 = new HashMap<>();
params1.put("operation", "exists");
params1.put("filePath", "/tmp/test.txt");

// å†™å…¥æ–‡ä»¶
Map<String, Object> params2 = new HashMap<>();
params2.put("operation", "write");
params2.put("filePath", "/tmp/evox_test.txt");
params2.put("content", "Hello from EvoX!");

// è¯»å–æ–‡ä»¶
Map<String, Object> params3 = new HashMap<>();
params3.put("operation", "read");
params3.put("filePath", "/tmp/evox_test.txt");

// åˆ—å‡ºç›®å½•
Map<String, Object> params4 = new HashMap<>();
params4.put("operation", "list");
params4.put("directory", "/tmp");

// åˆ é™¤æ–‡ä»¶
Map<String, Object> params5 = new HashMap<>();
params5.put("operation", "delete");
params5.put("filePath", "/tmp/evox_test.txt");
```

#### 4. æœç´¢å·¥å…·

```java
// Wikipedia æœç´¢
SearchTool wikiSearch = new SearchTool("wikipedia", 3);
Map<String, Object> params1 = new HashMap<>();
params1.put("query", "artificial intelligence");
params1.put("numResults", 2);

// Google æœç´¢é…ç½®
SearchTool googleSearch = new SearchTool("google", 5);

// DuckDuckGo æœç´¢é…ç½®
SearchTool ddgSearch = new SearchTool("duckduckgo", 10);
```

#### 5. æµè§ˆå™¨å·¥å…·

```java
BrowserTool browser = new BrowserTool();

// å¯¼èˆª
Map<String, Object> params1 = new HashMap<>();
params1.put("action", "navigate");
params1.put("url", "https://www.example.com");

// ç‚¹å‡»å…ƒç´ 
Map<String, Object> params2 = new HashMap<>();
params2.put("action", "click");
params2.put("selector", "#submit-button");

// è¾“å…¥æ–‡æœ¬
Map<String, Object> params3 = new HashMap<>();
params3.put("action", "type");
params3.put("selector", "#search-input");
params3.put("text", "EvoX Framework");

// æˆªå›¾
Map<String, Object> params4 = new HashMap<>();
params4.put("action", "screenshot");
params4.put("path", "/tmp/screenshot.png");
```

### å·¥å…·ç»„åˆä½¿ç”¨

```java
// ç ”ç©¶åŠ©ç†çš„å…¸å‹å·¥ä½œæµç¨‹
SearchTool search = new SearchTool("google", 5);
BrowserTool browser = new BrowserTool();
FileSystemTool file = new FileSystemTool();
CalculatorTool calc = new CalculatorTool();
HttpClientTool http = new HttpClientTool();

// 1. æœç´¢ä¸»é¢˜
var searchResults = search.execute(Map.of("query", "AI trends 2024"));

// 2. è®¿é—®ç¬¬ä¸€ä¸ªç»“æœ
String url = extractFirstUrl(searchResults);
var pageContent = browser.execute(Map.of("action", "navigate", "url", url));

// 3. ä¿å­˜å†…å®¹
file.execute(Map.of("operation", "write", "filePath", "/tmp/research.txt", 
                   "content", pageContent));

// 4. ç»Ÿè®¡åˆ†æ
var stats = calc.mean(extractNumbers(pageContent));

// 5. å‘é€æŠ¥å‘Š
http.execute(Map.of("method", "POST", "url", "https://api.example.com/report",
                   "body", createReport(stats)));
```

**ç« èŠ‚æ¥æº**
- [ToolsExample.java](file://evox-examples/src/main/java/io/leavesfly/evox/examples/ToolsExample.java#L22-L287)

## å·¥ä½œæµç¼–æ’ç¤ºä¾‹

### ç¤ºä¾‹æ¦‚è¿°

EvoX æä¾›äº†å¼ºå¤§è€Œçµæ´»çš„å·¥ä½œæµç¼–æ’ç³»ç»Ÿï¼Œæ”¯æŒé¡ºåºã€å†³ç­–ã€å¹¶è¡Œå’Œå¾ªç¯ç­‰å¤šç§æ§åˆ¶æµæ¨¡å¼ã€‚

### å·¥ä½œæµç±»å‹

```mermaid
graph TB
subgraph "å·¥ä½œæµç±»å‹"
Seq[é¡ºåºå·¥ä½œæµ<br/>Sequential]
Dec[å†³ç­–å·¥ä½œæµ<br/>Decision]
Par[å¹¶è¡Œå·¥ä½œæµ<br/>Parallel]
Loop[å¾ªç¯å·¥ä½œæµ<br/>Loop]
Sub[å­å·¥ä½œæµ<br/>SubWorkflow]
end
subgraph "é€‚ç”¨åœºæ™¯"
SeqScene[æ•°æ®å¤„ç†æµæ°´çº¿]
DecScene[æ¡ä»¶åˆ†æ”¯å¤„ç†]
ParScene[å¹¶è¡Œè®¡ç®—ä»»åŠ¡]
LoopScene[è¿­ä»£ä¼˜åŒ–ç®—æ³•]
SubScene[å¤æ‚ä¸šåŠ¡æµç¨‹]
end
Seq --> SeqScene
Dec --> DecScene
Par --> ParScene
Loop --> LoopScene
Sub --> SubScene
```

**å›¾è¡¨æ¥æº**
- [WorkflowDemo.java](file://evox-examples/src/main/java/io/leavesfly/evox/examples/WorkflowDemo.java#L42-L549)

### 1. é¡ºåºå·¥ä½œæµç¤ºä¾‹

é¡ºåºå·¥ä½œæµæ˜¯æœ€åŸºç¡€çš„å·¥ä½œæµç±»å‹ï¼ŒæŒ‰ç…§é¢„å®šä¹‰çš„é¡ºåºæ‰§è¡Œå„ä¸ªèŠ‚ç‚¹ã€‚

#### æ¶æ„è®¾è®¡

```mermaid
sequenceDiagram
participant Input as è¾“å…¥æ•°æ®
participant V as éªŒè¯èŠ‚ç‚¹
participant T as è½¬æ¢èŠ‚ç‚¹
participant S as æ±‡æ€»èŠ‚ç‚¹
participant Output as è¾“å‡ºç»“æœ
Input->>V : æ•°æ®éªŒè¯
V->>T : éªŒè¯é€šè¿‡
T->>S : æ•°æ®è½¬æ¢
S->>Output : ç»“æœæ±‡æ€»
```

**å›¾è¡¨æ¥æº**
- [SequentialWorkflowExample.java](file://evox-examples/src/main/java/io/leavesfly/evox/examples/SequentialWorkflowExample.java#L87-L106)

#### å®ç°è¦ç‚¹

```java
// åˆ›å»ºå·¥ä½œæµå›¾
WorkflowGraph graph = new WorkflowGraph("é¡ºåºæ•°æ®å¤„ç†å·¥ä½œæµ");

// åˆ›å»ºèŠ‚ç‚¹
WorkflowNode validateNode = new WorkflowNode();
validateNode.setName("DataProcessor.validate");
validateNode.setNodeType(WorkflowNode.NodeType.ACTION);

WorkflowNode transformNode = new WorkflowNode();
transformNode.setName("DataProcessor.transform");
transformNode.setNodeType(WorkflowNode.NodeType.ACTION);

WorkflowNode summarizeNode = new WorkflowNode();
summarizeNode.setName("DataProcessor.summarize");
summarizeNode.setNodeType(WorkflowNode.NodeType.ACTION);

// æ„å»ºè¿æ¥å…³ç³»
graph.addNode(validateNode);
graph.addNode(transformNode);
graph.addNode(summarizeNode);
graph.addEdge(validateNode.getNodeId(), transformNode.getNodeId());
graph.addEdge(transformNode.getNodeId(), summarizeNode.getNodeId());
```

### 2. å†³ç­–å·¥ä½œæµç¤ºä¾‹

å†³ç­–å·¥ä½œæµæ ¹æ®æ¡ä»¶é€‰æ‹©ä¸åŒçš„æ‰§è¡Œè·¯å¾„ã€‚

#### æ¶æ„è®¾è®¡

```mermaid
flowchart TD
Start([å¼€å§‹]) --> Validate[æ•°æ®éªŒè¯]
Validate --> Decision{æ•°æ®é‡æ£€æŸ¥}
Decision --> |æ•°æ®é‡ > 3| Large[å¤§æ•°æ®é›†å¤„ç†]
Decision --> |æ•°æ®é‡ â‰¤ 3| Small[å°æ•°æ®é›†å¤„ç†]
Large --> Transform[æ•°æ®è½¬æ¢]
Small --> Summarize[ç›´æ¥æ±‡æ€»]
Transform --> End([ç»“æŸ])
Summarize --> End
```

**å›¾è¡¨æ¥æº**
- [WorkflowDemo.java](file://evox-examples/src/main/java/io/leavesfly/evox/examples/WorkflowDemo.java#L112-L166)

#### å®ç°è¦ç‚¹

```java
// åˆ›å»ºå†³ç­–èŠ‚ç‚¹
WorkflowNode decisionNode = new WorkflowNode();
decisionNode.setName("decision");
decisionNode.setNodeType(WorkflowNode.NodeType.DECISION);
decisionNode.setCondition("context.dataSize > 3");

// è®¾ç½®åˆ†æ”¯æ˜ å°„
Map<String, String> branches = new HashMap<>();
branches.put("true", transformNode.getNodeId());
branches.put("false", summarizeNode.getNodeId());
decisionNode.setBranchMapping(branches);
```

### 3. å¹¶è¡Œå·¥ä½œæµç¤ºä¾‹

å¹¶è¡Œå·¥ä½œæµå…è®¸åŒæ—¶æ‰§è¡Œå¤šä¸ªç‹¬ç«‹çš„ä»»åŠ¡ã€‚

#### æ¶æ„è®¾è®¡

```mermaid
graph TB
Start([å¼€å§‹]) --> Parallel[å¹¶è¡ŒèŠ‚ç‚¹]
Parallel --> Transform[æ•°æ®è½¬æ¢]
Parallel --> Summarize[æ•°æ®æ±‡æ€»]
Transform --> Merge[ç»“æœåˆå¹¶]
Summarize --> Merge
Merge --> End([ç»“æŸ])
```

**å›¾è¡¨æ¥æº**
- [WorkflowDemo.java](file://evox-examples/src/main/java/io/leavesfly/evox/examples/WorkflowDemo.java#L198-L263)

#### å®ç°è¦ç‚¹

```java
// åˆ›å»ºå¹¶è¡ŒèŠ‚ç‚¹
WorkflowNode parallelNode = new WorkflowNode();
parallelNode.setName("parallel");
parallelNode.setNodeType(WorkflowNode.NodeType.PARALLEL);
parallelNode.setParallelStrategy(WorkflowNode.ParallelStrategy.ALL);

// æ·»åŠ å¹¶è¡Œå­èŠ‚ç‚¹
graph.addNode(transformNode);
graph.addNode(summarizeNode);
graph.addEdge(parallelNode.getNodeId(), transformNode.getNodeId());
graph.addEdge(parallelNode.getNodeId(), summarizeNode.getNodeId());
```

### 4. å¾ªç¯å·¥ä½œæµç¤ºä¾‹

å¾ªç¯å·¥ä½œæµæ”¯æŒé‡å¤æ‰§è¡ŒæŸä¸ªä»»åŠ¡ç›´åˆ°æ»¡è¶³ç‰¹å®šæ¡ä»¶ã€‚

#### æ¶æ„è®¾è®¡

```mermaid
flowchart TD
Init[åˆå§‹åŒ–è®¡æ•°å™¨] --> Loop{å¾ªç¯æ¡ä»¶}
Loop --> |ç»§ç»­å¾ªç¯| Transform[æ•°æ®è½¬æ¢]
Transform --> Loop
Loop --> |ç»“æŸ| End([ç»“æŸ])
```

**å›¾è¡¨æ¥æº**
- [WorkflowDemo.java](file://evox-examples/src/main/java/io/leavesfly/evox/examples/WorkflowDemo.java#L268-L324)

#### å®ç°è¦ç‚¹

```java
// åˆ›å»ºå¾ªç¯èŠ‚ç‚¹
WorkflowNode loopNode = new WorkflowNode();
loopNode.setName("loop");
loopNode.setNodeType(WorkflowNode.NodeType.LOOP);
loopNode.setMaxIterations(5);

// è®¾ç½®å¾ªç¯ä½“
graph.addEdge(initNode.getNodeId(), loopNode.getNodeId());
graph.addEdge(loopNode.getNodeId(), transformNode.getNodeId());
```

### 5. è‡ªå®šä¹‰æ•°æ®å¤„ç† Agent

å·¥ä½œæµä¸­çš„æ¯ä¸ªèŠ‚ç‚¹é€šå¸¸å¯¹åº”ä¸€ä¸ªä¸“é—¨çš„ Agentï¼š

```java
@Data
@EqualsAndHashCode(callSuper = true)
static class DataProcessorAgent extends Agent {
    
    public DataProcessorAgent() {
        // æ·»åŠ ä¸‰ä¸ªæ•°æ®å¤„ç†åŠ¨ä½œ
        addAction(new ValidateAction());
        addAction(new TransformAction());
        addAction(new SummarizeAction());
    }
    
    @Override
    public Message execute(String actionName, List<Message> messages) {
        Action action = getAction(actionName);
        // æ‰§è¡ŒåŠ¨ä½œé€»è¾‘...
    }
}
```

**ç« èŠ‚æ¥æº**
- [WorkflowDemo.java](file://evox-examples/src/main/java/io/leavesfly/evox/examples/WorkflowDemo.java#L42-L549)
- [SequentialWorkflowExample.java](file://evox-examples/src/main/java/io/leavesfly/evox/examples/SequentialWorkflowExample.java#L25-L125)

## ç»¼åˆèŠå¤©æœºå™¨äººç¤ºä¾‹

### ç¤ºä¾‹æ¦‚è¿°

ComprehensiveChatBot å±•ç¤ºäº† EvoX çš„é«˜çº§åŠŸèƒ½ï¼ŒåŒ…æ‹¬å¤šæ™ºèƒ½ä½“åä½œã€æ™ºèƒ½è·¯ç”±ã€å·¥å…·ä½¿ç”¨å’Œè®°å¿†ç®¡ç†ã€‚

### æ¶æ„è®¾è®¡

```mermaid
graph TB
subgraph "ç”¨æˆ·äº¤äº’å±‚"
User[ç”¨æˆ·è¾“å…¥]
end
subgraph "æ™ºèƒ½ä½“ç®¡ç†å±‚"
AgentManager[AgentManager<br/>æ™ºèƒ½ä½“ç®¡ç†å™¨]
end
subgraph "æ™ºèƒ½ä½“ç»„ä»¶"
RouterAgent[RouterAgent<br/>è·¯ç”±æ™ºèƒ½ä½“]
ToolAgent[ToolAgent<br/>å·¥å…·æ™ºèƒ½ä½“]
ChatAgent[ChatAgent<br/>èŠå¤©æ™ºèƒ½ä½“]
end
subgraph "å·¥å…·é›†"
Toolkit[Toolkit<br/>å·¥å…·é›†åˆ]
FileSystem[æ–‡ä»¶ç³»ç»Ÿå·¥å…·]
HttpTool[HTTPå·¥å…·]
WebSearch[ç½‘ç»œæœç´¢å·¥å…·]
end
subgraph "è®°å¿†ç³»ç»Ÿ"
Memory[ShortTermMemory<br/>çŸ­æœŸè®°å¿†]
end
User --> RouterAgent
RouterAgent --> AgentManager
ToolAgent --> Toolkit
Toolkit --> FileSystem
Toolkit --> HttpTool
Toolkit --> WebSearch
AgentManager --> ToolAgent
AgentManager --> ChatAgent
ChatAgent --> Memory
ToolAgent --> Memory
```

**å›¾è¡¨æ¥æº**
- [ComprehensiveChatBot.java](file://evox-examples/src/main/java/io/leavesfly/evox/examples/ComprehensiveChatBot.java#L28-L81)

### æ ¸å¿ƒç»„ä»¶è¯¦è§£

#### 1. AgentManager æ™ºèƒ½ä½“ç®¡ç†å™¨

```java
// åˆ›å»ºæ™ºèƒ½ä½“ç®¡ç†å™¨
AgentManager agentManager = new AgentManager();

// æ³¨å†Œæ™ºèƒ½ä½“
agentManager.addAgent(routerAgent);
agentManager.addAgent(toolAgent);
agentManager.addAgent(chatAgent);
```

#### 2. RouterAgent è·¯ç”±æ™ºèƒ½ä½“

è·¯ç”±æ™ºèƒ½ä½“è´Ÿè´£åˆ†æç”¨æˆ·è¾“å…¥å¹¶å†³å®šä½¿ç”¨å“ªä¸ªæ™ºèƒ½ä½“å¤„ç†ï¼š

```java
static class RouteAction extends Action {
    @Override
    public ActionOutput execute(ActionInput input) {
        List<Message> messages = (List<Message>) input.toMap().get("messages");
        String userInput = messages.get(messages.size() - 1).getContent().toString().toLowerCase();
        
        // åˆ¤æ–­æ˜¯å¦éœ€è¦å·¥å…·
        boolean needTool = userInput.contains("æœç´¢") || 
                         userInput.contains("è¯»å–") || 
                         userInput.contains("æ–‡ä»¶") ||
                         userInput.contains("å¤©æ°”");
        
        String selectedAgent = needTool ? "ToolAgent" : "ChatAgent";
        return SimpleActionOutput.success("é€‰æ‹©: " + selectedAgent);
    }
}
```

#### 3. ToolAgent å·¥å…·æ™ºèƒ½ä½“

å·¥å…·æ™ºèƒ½ä½“å¤„ç†éœ€è¦å¤–éƒ¨å·¥å…·çš„è¯·æ±‚ï¼š

```java
static class ToolProcessAction extends Action {
    private final Toolkit toolkit;
    
    @Override
    public ActionOutput execute(ActionInput input) {
        List<Message> messages = (List<Message>) input.toMap().get("messages");
        String userInput = messages.get(messages.size() - 1).getContent().toString();
        
        // ç®€å•æ¨¡æ‹Ÿå·¥å…·è°ƒç”¨
        String response = "å·¥å…·å¤„ç†ç»“æœ: " + userInput;
        return SimpleActionOutput.success(response);
    }
}
```

#### 4. å¤šæ™ºèƒ½ä½“åä½œæµç¨‹

```mermaid
sequenceDiagram
participant User as ç”¨æˆ·
participant Router as RouterAgent
participant Manager as AgentManager
participant Tool as ToolAgent
participant Chat as ChatAgent
participant Memory as ShortTermMemory
User->>Router : ç”¨æˆ·è¾“å…¥
Router->>Router : åˆ†æè¾“å…¥ç±»å‹
Router-->>Manager : è·¯ç”±å†³ç­–
Manager->>Tool : å·¥å…·è¯·æ±‚
Manager->>Chat : èŠå¤©è¯·æ±‚
Tool-->>Memory : ä¿å­˜å·¥å…·ç»“æœ
Chat-->>Memory : ä¿å­˜èŠå¤©è®°å½•
Memory-->>User : è¿”å›æœ€ç»ˆå“åº”
```

**å›¾è¡¨æ¥æº**
- [ComprehensiveChatBot.java](file://evox-examples/src/main/java/io/leavesfly/evox/examples/ComprehensiveChatBot.java#L143-L161)

### å¯¹è¯æ¼”ç¤ºæµç¨‹

```java
// è¿è¡Œå¯¹è¯æ¼”ç¤º
String[] userInputs = {
    "ä½ å¥½ï¼",                    // ç®€å•é—®å€™
    "æœç´¢ Java æœ€æ–°ç‰ˆæœ¬",        // éœ€è¦å·¥å…·çš„è¯·æ±‚
    "è¯»å–æ–‡ä»¶ /tmp/test.txt",   // æ–‡ä»¶æ“ä½œ
    "ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ",         // éœ€è¦å·¥å…·çš„è¯·æ±‚
    "è°¢è°¢ï¼"                    // ç»“æŸè¯­
};

for (String userInput : userInputs) {
    // åˆ›å»ºç”¨æˆ·æ¶ˆæ¯
    Message userMessage = Message.builder()
            .content(userInput)
            .messageType(MessageType.INPUT)
            .build();
    memory.addMessage(userMessage);
    
    // Step 1: è·¯ç”±Agentåˆ†æ
    Message routeResult = routerAgent.execute("route", Collections.singletonList(userMessage));
    String selectedAgent = extractSelectedAgent(routeResult.getContent().toString());
    
    // Step 2: æ‰§è¡Œé€‰å®šçš„Agent
    Agent selectedAgentInstance = agentManager.getAgent(selectedAgent);
    List<Message> context = memory.getLatestMessages(5);
    Message response = selectedAgentInstance.execute("process", context);
    
    // ä¿å­˜å›å¤åˆ°è®°å¿†
    memory.addMessage(response);
}
```

**ç« èŠ‚æ¥æº**
- [ComprehensiveChatBot.java](file://evox-examples/src/main/java/io/leavesfly/evox/examples/ComprehensiveChatBot.java#L26-L413)

## å¤šæ¨¡å‹é€‚é…ç¤ºä¾‹

### ç¤ºä¾‹æ¦‚è¿°

MultiModelExample å±•ç¤ºäº† EvoX å¦‚ä½•æ”¯æŒå¤šç§ LLM æä¾›å•†ï¼ŒåŒ…æ‹¬é˜¿é‡Œäº‘é€šä¹‰åƒé—®å’Œ LiteLLM é€šç”¨é€‚é…å™¨ã€‚

### æ”¯æŒçš„æ¨¡å‹æä¾›å•†

```mermaid
graph TB
subgraph "EvoX æ¨¡å‹é€‚é…å™¨"
BaseLLM[BaseLLM<br/>åŸºç¡€æŠ½è±¡]
end
subgraph "å…·ä½“å®ç°"
OpenAI[OpenAI LLM]
Aliyun[é˜¿é‡Œäº‘é€šä¹‰åƒé—®]
LiteLLM[LiteLLM é€šç”¨é€‚é…å™¨]
SiliconFlow[ç¡…åŸºæµåŠ¨]
OpenRouter[OpenRouter]
end
subgraph "é…ç½®ç®¡ç†"
OpenAIConfig[OpenAI é…ç½®]
AliyunConfig[é˜¿é‡Œäº‘é…ç½®]
LiteLLMConfig[LiteLLM é…ç½®]
end
BaseLLM --> OpenAI
BaseLLM --> Aliyun
BaseLLM --> LiteLLM
BaseLLM --> SiliconFlow
BaseLLM --> OpenRouter
OpenAI --> OpenAIConfig
Aliyun --> AliyunConfig
LiteLLM --> LiteLLMConfig
```

**å›¾è¡¨æ¥æº**
- [MultiModelExample.java](file://evox-examples/src/main/java/io/leavesfly/evox/examples/MultiModelExample.java#L25-L170)

### é˜¿é‡Œäº‘é€šä¹‰åƒé—®é…ç½®

```java
// åˆ›å»ºé˜¿é‡Œäº‘æ¨¡å‹é…ç½®
AliyunLLMConfig config = AliyunLLMConfig.builder()
        .apiKey("your-dashscope-api-key")  // å®é™…ä½¿ç”¨æ—¶éœ€è¦æ›¿æ¢ä¸ºçœŸå® API Key
        .model("qwen-turbo")
        .temperature(0.7f)
        .topP(0.9f)
        .maxTokens(1500)
        .enableSearch(false)
        .repetitionPenalty(1.0f)
        .build();

// åˆ›å»ºé˜¿é‡Œäº‘ LLM å®ä¾‹
BaseLLM aliyunLLM = new AliyunLLM(config);
```

### LiteLLM é€šç”¨é€‚é…å™¨é…ç½®

```java
// é…ç½®1ï¼šä½¿ç”¨ OpenAI å…¼å®¹æ¥å£
LiteLLMConfig openaiConfig = LiteLLMConfig.builder()
        .apiKey("your-openai-api-key")
        .model("gpt-3.5-turbo")
        .baseUrl("https://api.openai.com/v1")
        .temperature(0.8f)
        .maxTokens(2000)
        .build();

// é…ç½®2ï¼šä½¿ç”¨æœ¬åœ°æ¨¡å‹
LiteLLMConfig localConfig = LiteLLMConfig.builder()
        .model("local-llama2")
        .baseUrl("http://localhost:8080")
        .isLocal(true)
        .temperature(0.7f)
        .build();

// é…ç½®3ï¼šä½¿ç”¨ Azure OpenAI
LiteLLMConfig azureConfig = LiteLLMConfig.builder()
        .model("gpt-4")
        .azureEndpoint("https://your-resource.openai.azure.com")
        .azureKey("your-azure-key")
        .apiVersion("2023-05-15")
        .temperature(0.7f)
        .build();
```

### é…ç½®å¯¹æ¯”è¡¨

| é…ç½®é¡¹ | é˜¿é‡Œäº‘é€šä¹‰åƒé—® | LiteLLM OpenAI | LiteLLM æœ¬åœ° |
|-------|---------------|---------------|-------------|
| æ¨¡å‹åç§° | qwen-turbo | gpt-3.5-turbo | local-llama2 |
| API å¯†é’¥ | dashscope-api-key | openai-api-key | æ— éœ€å¯†é’¥ |
| åŸºç¡€ URL | é»˜è®¤ | https://api.openai.com/v1 | http://localhost:8080 |
| æ¸©åº¦å‚æ•° | 0.7 | 0.8 | 0.7 |
| æœ€å¤§ Token | 1500 | 2000 | å¯é…ç½® |
| æœ¬åœ°æ¨¡å‹ | âŒ | âŒ | âœ… |
| Azure æ”¯æŒ | âŒ | âœ… | âŒ |
| æœç´¢åŠŸèƒ½ | âœ… | âŒ | âŒ |

### ä½¿ç”¨ç¤ºä¾‹

```java
// åˆ›å»ºæµ‹è¯•æ¶ˆæ¯
List<Message> messages = List.of(
    Message.builder()
        .messageType(MessageType.SYSTEM)
        .content("You are a helpful assistant.")
        .build(),
    Message.builder()
        .messageType(MessageType.INPUT)
        .content("ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±ã€‚")
        .build()
);

// ä½¿ç”¨é˜¿é‡Œäº‘æ¨¡å‹
BaseLLM aliyunLLM = new AliyunLLM(aliyunConfig);
String response1 = aliyunLLM.generate(messages);

// ä½¿ç”¨ OpenAI å…¼å®¹æ¨¡å‹
BaseLLM openaiLLM = new LiteLLM(openaiConfig);
String response2 = openaiLLM.generate(messages);

// ä½¿ç”¨æœ¬åœ°æ¨¡å‹
BaseLLM localLLM = new LiteLLM(localConfig);
String response3 = localLLM.generate(messages);
```

**ç« èŠ‚æ¥æº**
- [MultiModelExample.java](file://evox-examples/src/main/java/io/leavesfly/evox/examples/MultiModelExample.java#L25-L170)

## æ€§èƒ½åŸºå‡†æµ‹è¯•ç¤ºä¾‹

### ç¤ºä¾‹æ¦‚è¿°

BenchmarkExample å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ EvoX çš„åŸºå‡†æµ‹è¯•åŠŸèƒ½æ¥è¯„ä¼°æ¨¡å‹æ€§èƒ½ï¼ŒåŒ…æ‹¬æ•°å­¦é—®é¢˜è§£å†³å’Œä»£ç ç”Ÿæˆèƒ½åŠ›ã€‚

### æ”¯æŒçš„åŸºå‡†æµ‹è¯•

```mermaid
graph TB
subgraph "æ•°å­¦æ¨ç†"
GSM8K[GSM8K<br/>å°å­¦æ•°å­¦é—®é¢˜]
end
subgraph "ä»£ç ç”Ÿæˆ"
HumanEval[HumanEval<br/>ç¼–ç¨‹é¢˜ç›®]
MBPP[MBPP<br/>Pythonç¼–ç¨‹]
end
subgraph "è¯„ä¼°æŒ‡æ ‡"
Accuracy[å‡†ç¡®ç‡]
F1[F1åˆ†æ•°]
BLEU[BLEUåˆ†æ•°]
Similarity[ç›¸ä¼¼åº¦]
end
GSM8K --> Accuracy
HumanEval --> Similarity
MBPP --> Accuracy
```

**å›¾è¡¨æ¥æº**
- [BenchmarkExample.java](file://evox-examples/src/main/java/io/leavesfly/evox/examples/BenchmarkExample.java#L16-L165)

### GSM8K æ•°å­¦é—®é¢˜è¯„ä¼°

GSM8K æ˜¯ä¸€ä¸ªä¸“é—¨é’ˆå¯¹å°å­¦æ•°å­¦é—®é¢˜çš„åŸºå‡†æµ‹è¯•ï¼š

```java
// åˆ›å»ºGSM8K benchmarkå®ä¾‹
String dataPath = "data/gsm8k/test.jsonl";
GSM8K gsm8k = new GSM8K(dataPath);

// åŠ è½½æ•°æ®
log.info("åŠ è½½GSM8Kæ•°æ®: {}", dataPath);
// gsm8k.loadData(); // å®é™…ä½¿ç”¨æ—¶éœ€è¦å–æ¶ˆæ³¨é‡Š

// æ¨¡æ‹Ÿè¯„ä¼°è¿‡ç¨‹
String question = "Janetçš„é¸­å­æ¯å¤©äº§16ä¸ªè›‹ã€‚å¥¹æ¯å¤©æ—©ä¸Šåƒ3ä¸ªé¸¡è›‹åšæ—©é¤ï¼Œ" +
                 "ä¸ºæœ‹å‹çƒ¤æ¾é¥¼ç”¨4ä¸ªï¼Œç„¶åæŠŠå‰©ä¸‹çš„é¸¡è›‹ä»¥æ¯é¢—$2çš„ä»·æ ¼å–ç»™" +
                 "å†œè´¸å¸‚åœºã€‚å¥¹æ¯å¤©åœ¨å†œè´¸å¸‚åœºèµšå¤šå°‘é’±ï¼Ÿ";

String groundTruth = "18";
String prediction = "Janetæ¯å¤©äº§16ä¸ªè›‹ï¼Œåƒæ‰3ä¸ªï¼Œç”¨æ‰4ä¸ªï¼Œæ‰€ä»¥å‰©ä¸‹16-3-4=9ä¸ªè›‹ã€‚" +
                  "å¥¹ä»¥æ¯é¢—$2çš„ä»·æ ¼å–å‡ºï¼Œæ‰€ä»¥9*2=18ç¾å…ƒã€‚#### 18";

// è¯„ä¼°å•ä¸ªæ ·æœ¬
var metrics = gsm8k.evaluate(prediction, groundTruth);
log.info("è¯„ä¼°ç»“æœ: {}", metrics);
```

### HumanEval ä»£ç ç”Ÿæˆè¯„ä¼°

HumanEval æ˜¯ä¸€ä¸ªç¼–ç¨‹èƒ½åŠ›è¯„ä¼°åŸºå‡†ï¼š

```java
// åˆ›å»ºHumanEval benchmarkå®ä¾‹
String dataPath = "data/humaneval/test.jsonl";
HumanEval humanEval = new HumanEval(dataPath);

// æ¨¡æ‹Ÿä»£ç è¯„ä¼°
String prompt = "def has_close_elements(numbers, threshold):\n" +
               "    \"\"\"æ£€æŸ¥ç»™å®šæ•°å­—åˆ—è¡¨ä¸­ï¼Œæ˜¯å¦æœ‰ä»»ä½•ä¸¤ä¸ªæ•°å­—ä¹‹é—´çš„è·ç¦»å°äºç»™å®šé˜ˆå€¼ã€‚\"\"\"\n";

String canonicalSolution = "    for idx, elem in enumerate(numbers):\n" +
                         "        for idx2, elem2 in enumerate(numbers):\n" +
                         "            if idx != idx2:\n" +
                         "                distance = abs(elem - elem2)\n" +
                         "                if distance < threshold:\n" +
                         "                    return True\n" +
                         "    return False\n";

String generatedCode = "    for i in range(len(numbers)):\n" +
                     "        for j in range(i+1, len(numbers)):\n" +
                     "            if abs(numbers[i] - numbers[j]) < threshold:\n" +
                     "                return True\n" +
                     "    return False\n";

// è¯„ä¼°ä»£ç ç›¸ä¼¼åº¦
var metrics = humanEval.evaluate(generatedCode, canonicalSolution);
log.info("ä»£ç è¯„ä¼°æŒ‡æ ‡: {}", metrics);
log.info("ç›¸ä¼¼åº¦åˆ†æ•°: {}", metrics.get("accuracy"));
```

### æ‰¹é‡è¯„ä¼°ç¤ºä¾‹

```java
// æ‰¹é‡è¯„ä¼°ç¤ºä¾‹
List<String> predictions = new ArrayList<>();
for (GSM8K.GSM8KExample example : gsm8k.getTestData()) {
    String prediction = yourModel.predict(example.getQuestion());
    predictions.add(prediction);
}

// è®¡ç®—æ•´ä½“æŒ‡æ ‡
Map<String, Double> metrics = gsm8k.evaluate(predictions);
log.info("æ•´ä½“å‡†ç¡®ç‡: {}", metrics.get("accuracy"));
```

### è‡ªå®šä¹‰è¯„ä¼°æŒ‡æ ‡

```java
// æ‰©å±•åŸºå‡†æµ‹è¯•ç±»æ·»åŠ è‡ªå®šä¹‰æŒ‡æ ‡
public class CustomBenchmark extends MessageBenchmark {
    @Override
    protected Map<String, Double> evaluateSingle(String prediction, String groundTruth) {
        Map<String, Double> metrics = new HashMap<>();
        
        // è®¡ç®—ç²¾ç¡®åŒ¹é…
        metrics.put("exact_match", prediction.equals(groundTruth) ? 1.0 : 0.0);
        
        // è®¡ç®—F1åˆ†æ•°
        metrics.put("f1_score", calculateF1(prediction, groundTruth));
        
        // è®¡ç®—BLEUåˆ†æ•°
        metrics.put("bleu_score", calculateBLEU(prediction, groundTruth));
        
        return metrics;
    }
}
```

**ç« èŠ‚æ¥æº**
- [BenchmarkExample.java](file://evox-examples/src/main/java/io/leavesfly/evox/examples/BenchmarkExample.java#L16-L165)

## è¿è¡Œç¤ºä¾‹çš„æ–¹æ³•

### ç¯å¢ƒè¦æ±‚

åœ¨è¿è¡Œç¤ºä¾‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š

| ç»„ä»¶ | ç‰ˆæœ¬è¦æ±‚ | è¯´æ˜ |
|------|---------|------|
| Java | JDK 17 æˆ–æ›´é«˜ | EvoX éœ€è¦ Java 17+ |
| Maven | 3.6+ | ç”¨äºæ„å»ºå’Œè¿è¡Œç¤ºä¾‹ |
| OpenAI API Key | å¯é€‰ | ç”¨äº LLM è°ƒç”¨ |
| ç½‘ç»œè¿æ¥ | å¿…éœ€ | ä¸‹è½½ä¾èµ–å’Œè°ƒç”¨ API |

### ç¼–è¯‘å’Œå®‰è£…

```bash
# è¿›å…¥é¡¹ç›®æ ¹ç›®å½•
cd evox

# ç¼–è¯‘å¹¶å®‰è£…æ‰€æœ‰æ¨¡å—
mvn clean install -DskipTests
```

### è¿è¡Œå•ä¸ªç¤ºä¾‹

```bash
# è¿è¡Œ SimpleChatBot
mvn exec:java -pl evox-examples \
  -Dexec.mainClass="io.leavesfly.evox.examples.SimpleChatBot"

# è¿è¡Œ ComprehensiveChatBot  
mvn exec:java -pl evox-examples \
  -Dexec.mainClass="io.leavesfly.evox.examples.ComprehensiveChatBot"

# è¿è¡Œ ToolsExample
mvn exec:java -pl evox-examples \
  -Dexec.mainClass="io.leavesfly.evox.examples.ToolsExample"

# è¿è¡Œ WorkflowDemo
mvn exec:java -pl evox-examples \
  -Dexec.mainClass="io.leavesfly.evox.examples.WorkflowDemo"
```

### ä½¿ç”¨è„šæœ¬è¿è¡Œ

EvoX æä¾›äº†ä¾¿æ·çš„è¿è¡Œè„šæœ¬ï¼š

```bash
# è¿›å…¥ç¤ºä¾‹ç›®å½•
cd evox-examples

# è¿è¡Œäº¤äº’å¼è„šæœ¬
./run-examples.sh

# æˆ–è€…ç›´æ¥æŒ‡å®šç¤ºä¾‹
mvn exec:java -pl evox-examples \
  -Dexec.mainClass="io.leavesfly.evox.examples.MultiModelExample"
```

### å¸¸è§è¿è¡Œé—®é¢˜

#### 1. ç¼–è¯‘å¤±è´¥

```bash
# æ£€æŸ¥ Java ç‰ˆæœ¬
java -version  # åº”è¯¥æ˜¯ 17 æˆ–æ›´é«˜

# æ£€æŸ¥ Maven ç‰ˆæœ¬
mvn -version   # åº”è¯¥æ˜¯ 3.6+

# æ¸…ç†åé‡æ–°ç¼–è¯‘
mvn clean install -U -DskipTests
```

#### 2. OpenAI API è°ƒç”¨å¤±è´¥

```bash
# æ£€æŸ¥ API Key æ˜¯å¦æ­£ç¡®
export OPENAI_API_KEY="your-api-key"

# æ£€æŸ¥ç½‘ç»œè¿æ¥
curl -H "Authorization: Bearer $OPENAI_API_KEY" \
     https://api.openai.com/v1/models

# è®¾ç½®ä»£ç†ï¼ˆå¦‚æœéœ€è¦ï¼‰
export HTTP_PROXY=http://your-proxy:port
export HTTPS_PROXY=http://your-proxy:port
```

#### 3. æ‰¾ä¸åˆ°ç±»æˆ–ä¾èµ–

```bash
# ç¡®ä¿å…ˆå®‰è£…äº†æ‰€æœ‰ä¾èµ–æ¨¡å—
cd evox
mvn clean install -DskipTests

# ç„¶åå†è¿è¡Œç¤ºä¾‹
mvn exec:java -pl evox-examples -Dexec.mainClass="..."
```

**ç« èŠ‚æ¥æº**
- [run-examples.sh](file://evox-examples/run-examples.sh#L1-L96)
- [README.md](file://evox-examples/README.md#L16-L30)

## æœ€ä½³å®è·µå’Œæ¶æ„è®¾è®¡

### 1. æ¨¡å—åŒ–è®¾è®¡åŸåˆ™

EvoX éµå¾ªæ¨¡å—åŒ–è®¾è®¡åŸåˆ™ï¼Œæ¯ä¸ªç»„ä»¶éƒ½æœ‰æ˜ç¡®çš„èŒè´£ï¼š

```mermaid
graph TB
subgraph "è¡¨ç°å±‚"
UI[ç”¨æˆ·ç•Œé¢]
CLI[å‘½ä»¤è¡Œç•Œé¢]
end
subgraph "ä¸šåŠ¡é€»è¾‘å±‚"
AgentManager[æ™ºèƒ½ä½“ç®¡ç†å™¨]
WorkflowEngine[å·¥ä½œæµå¼•æ“]
MemoryManager[è®°å¿†ç®¡ç†å™¨]
end
subgraph "æœåŠ¡å±‚"
LLMService[LLMæœåŠ¡]
ToolService[å·¥å…·æœåŠ¡]
StorageService[å­˜å‚¨æœåŠ¡]
end
subgraph "åŸºç¡€è®¾æ–½å±‚"
ConfigManager[é…ç½®ç®¡ç†]
LogManager[æ—¥å¿—ç®¡ç†]
ErrorHandler[é”™è¯¯å¤„ç†]
end
UI --> AgentManager
CLI --> WorkflowEngine
AgentManager --> LLMService
WorkflowEngine --> ToolService
MemoryManager --> StorageService
LLMService --> ConfigManager
ToolService --> LogManager
StorageService --> ErrorHandler
```

### 2. æ™ºèƒ½ä½“è®¾è®¡æ¨¡å¼

#### å•ä¸€èŒè´£åŸåˆ™

æ¯ä¸ªæ™ºèƒ½ä½“åº”è¯¥ä¸“æ³¨äºç‰¹å®šçš„ä»»åŠ¡é¢†åŸŸï¼š

```java
// æ•°æ®åˆ†ææ™ºèƒ½ä½“
public class DataAnalysisAgent extends Agent {
    public DataAnalysisAgent() {
        addAction(new DataValidationAction());
        addAction(new StatisticalAnalysisAction());
        addAction(new ReportGenerationAction());
    }
}

// æ–‡æ¡£å¤„ç†æ™ºèƒ½ä½“  
public class DocumentProcessingAgent extends Agent {
    public DocumentProcessingAgent() {
        addAction(new OCRAction());
        addAction(new TextExtractionAction());
        addAction(new FormatConversionAction());
    }
}
```

#### ç»„åˆæ¨¡å¼

é€šè¿‡ç»„åˆå¤šä¸ªæ™ºèƒ½ä½“æ¥å®Œæˆå¤æ‚ä»»åŠ¡ï¼š

```java
// ç ”ç©¶åŠ©ç†æ™ºèƒ½ä½“
public class ResearchAssistantAgent extends Agent {
    private final SearchAgent searchAgent;
    private final DocumentAgent documentAgent;
    private final AnalysisAgent analysisAgent;
    
    public ResearchAssistantAgent() {
        searchAgent = new SearchAgent();
        documentAgent = new DocumentAgent();
        analysisAgent = new AnalysisAgent();
        
        addAction(new ResearchCoordinatorAction());
    }
}
```

### 3. å·¥å…·é›†æˆç­–ç•¥

#### å·¥å…·å°è£…åŸåˆ™

```java
// ç»Ÿä¸€çš„å·¥å…·æ¥å£
public interface BaseTool {
    String getName();
    String getDescription();
    Map<String, Object> execute(Map<String, Object> parameters);
}

// å…·ä½“å·¥å…·å®ç°
public class FileSystemTool implements BaseTool {
    @Override
    public String getName() { return "filesystem"; }
    
    @Override
    public String getDescription() { return "æ–‡ä»¶ç³»ç»Ÿæ“ä½œå·¥å…·"; }
    
    @Override
    public Map<String, Object> execute(Map<String, Object> parameters) {
        // å®ç°æ–‡ä»¶æ“ä½œé€»è¾‘
    }
}
```

#### å·¥å…·é“¾æ¨¡å¼

```java
// å·¥å…·é“¾ç®¡ç†
public class ToolChain {
    private final List<BaseTool> tools;
    
    public ToolChain() {
        this.tools = new ArrayList<>();
    }
    
    public void addTool(BaseTool tool) {
        tools.add(tool);
    }
    
    public Map<String, Object> executeChain(Map<String, Object> input) {
        Map<String, Object> result = input;
        for (BaseTool tool : tools) {
            result = tool.execute(result);
        }
        return result;
    }
}
```

### 4. å·¥ä½œæµè®¾è®¡æ¨¡å¼

#### æ§åˆ¶æµæ¨¡å¼

```java
// é¡ºåºæ‰§è¡Œ
public class SequentialWorkflow {
    private final List<WorkflowNode> nodes;
    
    public String execute(Map<String, Object> input) {
        String result = "";
        for (WorkflowNode node : nodes) {
            result = node.process(result);
        }
        return result;
    }
}

// å¹¶è¡Œæ‰§è¡Œ
public class ParallelWorkflow {
    private final List<WorkflowNode> nodes;
    
    public Map<String, String> execute(Map<String, Object> input) {
        ExecutorService executor = Executors.newFixedThreadPool(nodes.size());
        List<Future<Map.Entry<String, String>>> futures = new ArrayList<>();
        
        for (WorkflowNode node : nodes) {
            futures.add(executor.submit(() -> {
                String output = node.process(input);
                return new AbstractMap.SimpleEntry<>(node.getId(), output);
            }));
        }
        
        Map<String, String> results = new HashMap<>();
        for (Future<Map.Entry<String, String>> future : futures) {
            Map.Entry<String, String> entry = future.get();
            results.put(entry.getKey(), entry.getValue());
        }
        
        return results;
    }
}
```

#### é”™è¯¯å¤„ç†æ¨¡å¼

```java
// å·¥ä½œæµé”™è¯¯å¤„ç†
public class RobustWorkflow {
    private final WorkflowNode[] nodes;
    private final ErrorHandler errorHandler;
    
    public String executeWithRetry(Map<String, Object> input, int maxRetries) {
        for (int attempt = 0; attempt < maxRetries; attempt++) {
            try {
                return execute(input);
            } catch (Exception e) {
                if (attempt == maxRetries - 1) {
                    throw e;
                }
                errorHandler.handle(e, attempt + 1);
                Thread.sleep(1000 * (attempt + 1)); // æŒ‡æ•°é€€é¿
            }
        }
        return null;
    }
}
```

### 5. è®°å¿†ç³»ç»Ÿè®¾è®¡

#### å¤šå±‚æ¬¡è®°å¿†æ¶æ„

```java
// è®°å¿†å±‚æ¬¡ç»“æ„
public class MemoryHierarchy {
    private final ShortTermMemory shortTermMemory;
    private final WorkingMemory workingMemory;
    private final LongTermMemory longTermMemory;
    
    public MemoryHierarchy() {
        this.shortTermMemory = new ShortTermMemory(20);
        this.workingMemory = new WorkingMemory();
        this.longTermMemory = new LongTermMemory(createConfig());
    }
    
    public void addMessage(Message message, MemoryLevel level) {
        switch (level) {
            case SHORT_TERM:
                shortTermMemory.add(message);
                break;
            case WORKING:
                workingMemory.add(message);
                break;
            case LONG_TERM:
                longTermMemory.add(message);
                break;
        }
    }
}
```

#### è®°å¿†æ£€ç´¢ç­–ç•¥

```java
// æ™ºèƒ½è®°å¿†æ£€ç´¢
public class SmartMemoryRetrieval {
    private final MemoryManager memoryManager;
    private final EmbeddingService embeddingService;
    
    public List<Message> retrieveRelevantMessages(String query, int topK) {
        // ç”ŸæˆæŸ¥è¯¢åµŒå…¥
        List<Float> queryEmbedding = embeddingService.embed(query);
        
        // å‘é‡æ£€ç´¢
        List<Message> vectorResults = memoryManager.vectorSearch(queryEmbedding, topK);
        
        // å…³é”®è¯æ£€ç´¢
        List<Message> keywordResults = memoryManager.keywordSearch(query, topK);
        
        // ç»“æœèåˆ
        return fuseResults(vectorResults, keywordResults, topK);
    }
}
```

### 6. æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

#### å¼‚æ­¥å¤„ç†

```java
// å¼‚æ­¥æ™ºèƒ½ä½“æ‰§è¡Œ
public class AsyncAgent {
    private final ExecutorService executor;
    
    public CompletableFuture<Message> executeAsync(String actionName, List<Message> messages) {
        return CompletableFuture.supplyAsync(() -> {
            return agent.execute(actionName, messages);
        }, executor);
    }
}
```

#### ç¼“å­˜ç­–ç•¥

```java
// æ™ºèƒ½ç¼“å­˜
public class IntelligentCache {
    private final Map<String, Object> cache;
    private final CacheConfig config;
    
    public Object getOrCompute(String key, Supplier<Object> computation) {
        if (cache.containsKey(key) && !isExpired(key)) {
            return cache.get(key);
        }
        
        Object result = computation.get();
        cache.put(key, result);
        return result;
    }
}
```

## æ€»ç»“

EvoX æ¡†æ¶æä¾›äº†å®Œæ•´è€Œå¼ºå¤§çš„ AI åº”ç”¨å¼€å‘å·¥å…·é“¾ï¼Œé€šè¿‡æœ¬æŒ‡å—å±•ç¤ºçš„å„ç§ç¤ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š

### æ ¸å¿ƒä¼˜åŠ¿

1. **æ¨¡å—åŒ–æ¶æ„**ï¼šæ¸…æ™°åˆ†ç¦»çš„å…³æ³¨ç‚¹ä½¿å¾—ç³»ç»Ÿæ˜“äºç»´æŠ¤å’Œæ‰©å±•
2. **çµæ´»çš„æ™ºèƒ½ä½“ç³»ç»Ÿ**ï¼šæ”¯æŒå•ä¸€èŒè´£å’Œç»„åˆæ¨¡å¼çš„æ™ºèƒ½ä½“è®¾è®¡
3. **ä¸°å¯Œçš„å·¥å…·ç”Ÿæ€**ï¼šå†…ç½®å¤šç§å®ç”¨å·¥å…·ï¼Œæ”¯æŒè‡ªå®šä¹‰æ‰©å±•
4. **å¼ºå¤§çš„å·¥ä½œæµç¼–æ’**ï¼šæ”¯æŒå¤æ‚ä¸šåŠ¡æµç¨‹çš„å¯è§†åŒ–è®¾è®¡
5. **å¤šæ¨¡å‹æ”¯æŒ**ï¼šç»Ÿä¸€æ¥å£æ”¯æŒå¤šç§ LLM æä¾›å•†

### åº”ç”¨åœºæ™¯

- **ç®€å•èŠå¤©æœºå™¨äºº**ï¼šé€‚åˆå¿«é€ŸåŸå‹å¼€å‘å’ŒåŸºç¡€å¯¹è¯åœºæ™¯
- **ç»¼åˆæ™ºèƒ½åŠ©æ‰‹**ï¼šæ”¯æŒå¤šæ™ºèƒ½ä½“åä½œå’Œå¤æ‚ä»»åŠ¡å¤„ç†
- **ä¼ä¸šçº§åº”ç”¨**ï¼šç»“åˆå·¥ä½œæµç¼–æ’å’Œå·¥å…·é›†æˆçš„å¤æ‚ä¸šåŠ¡ç³»ç»Ÿ
- **ç ”ç©¶å’Œå®éªŒ**ï¼šæ”¯æŒå¤šç§æ¨¡å‹å’Œè¯„ä¼°åŸºå‡†çš„å®éªŒå¹³å°

### å¼€å‘å»ºè®®

1. **ä»ç®€å•å¼€å§‹**ï¼šå…ˆä» SimpleChatBot å¼€å§‹ï¼Œé€æ­¥å¢åŠ å¤æ‚æ€§
2. **æ¨¡å—åŒ–è®¾è®¡**ï¼šéµå¾ªå•ä¸€èŒè´£åŸåˆ™ï¼Œåˆç†åˆ’åˆ†ç»„ä»¶è¾¹ç•Œ
3. **å·¥å…·é›†æˆ**ï¼šå……åˆ†åˆ©ç”¨å†…ç½®å·¥å…·ï¼Œå¿…è¦æ—¶æ‰©å±•è‡ªå®šä¹‰å·¥å…·
4. **å·¥ä½œæµç¼–æ’**ï¼šå¯¹äºå¤æ‚ä¸šåŠ¡æµç¨‹ï¼Œä¼˜å…ˆè€ƒè™‘å·¥ä½œæµè®¾è®¡
5. **æ€§èƒ½ä¼˜åŒ–**ï¼šåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹è€ƒè™‘å¼‚æ­¥å¤„ç†å’Œç¼“å­˜ç­–ç•¥

### æœªæ¥å‘å±•æ–¹å‘

- **è®°å¿†ç³»ç»Ÿçš„å®Œå–„**ï¼šé•¿æœŸè®°å¿†ã€å·¥ä½œè®°å¿†ç­‰åŠŸèƒ½çš„è¿›ä¸€æ­¥å¼€å‘
- **æ›´å¤šå·¥å…·æ”¯æŒ**ï¼šæ•°æ®åº“ã€å›¾åƒå¤„ç†ã€è¯­éŸ³è¯†åˆ«ç­‰å·¥å…·çš„é›†æˆ
- **å¯è§†åŒ–ç¼–è¾‘å™¨**ï¼šæ‹–æ‹½å¼çš„å·¥ä½œæµè®¾è®¡ç•Œé¢
- **äº‘ç«¯éƒ¨ç½²**ï¼šå®¹å™¨åŒ–å’Œå¾®æœåŠ¡åŒ–çš„éƒ¨ç½²æ–¹æ¡ˆ

é€šè¿‡æŒæ¡è¿™äº›ç¤ºä¾‹å’Œæœ€ä½³å®è·µï¼Œå¼€å‘è€…å¯ä»¥å¿«é€Ÿä¸Šæ‰‹ EvoX æ¡†æ¶ï¼Œæ„å»ºå‡ºåŠŸèƒ½å¼ºå¤§ã€æ¶æ„ä¼˜é›…çš„ AI åº”ç”¨ç¨‹åºã€‚